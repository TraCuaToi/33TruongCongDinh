function doPost(e) {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Orders");
  if (!sheet) {
    sheet = SpreadsheetApp.getActiveSpreadsheet().insertSheet("Orders");
    sheet.appendRow(["SÄT","TÃªn mÃ³n","Size","SL","Topping","Ghi chÃº","Tá»•ng tiá»n","Thá»i gian"]);
  }

  var order = JSON.parse(e.parameter.order);

  order.items.forEach(item => {
sheet.appendRow([
  order.phoneNumber,
  item.name,
  item.size || "",
  String(item.quantity), // ðŸ‘‰ Ã©p sá»‘ thÃ nh chuá»—i Ä‘á»ƒ khÃ´ng bá»‹ thÃ nh ngÃ y
  (item.toppings || []).map(t => t.name).join(", "),
  order.notes || "",
  item.price * item.quantity,
  new Date()
]);
  });

  return ContentService.createTextOutput("success");
}
